{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["interface ProgressBarConfig {\n  /**\n   * The size (height) of the progress bar.\n   * Numeric values get converted to px. */\n  size: number | string;\n  /**\n   * Color of the progress bar. Also used for the glow\n   * around the bar. */\n  color: string;\n  /**\n   * Class name used for the progress bar element. */\n  className: string;\n  /**\n   * How many milliseconds to wait before the progress bar\n   * animation starts after calling .start(). */\n  delay: number;\n}\n\nexport default class ProgressBar {\n  /** Show the progress bar and begin animating it. */\n  start: () => void;\n\n  /** End the progress bar animation. */\n  finish: () => void;\n\n  constructor(options?: Partial<ProgressBarConfig>) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const assign = (to: any, from: any): void => {\n      Object.keys(from).forEach((key) => {\n        to[key] = from[key];\n      });\n    };\n\n    const config: ProgressBarConfig = {\n      size: 2,\n      color: \"#29e\",\n      className: \"bar-of-progress\",\n      delay: 80,\n    };\n    if (options) {\n      assign(config, options);\n    }\n\n    const initialStyle = {\n      position: \"fixed\",\n      top: 0,\n      left: 0,\n      margin: 0,\n      padding: 0,\n      border: \"none\",\n      borderRadius: 0,\n      backgroundColor: \"currentColor\",\n      zIndex: 10000,\n      height:\n        typeof config.size === \"number\" ? config.size + \"px\" : config.size,\n      color: config.color,\n      opacity: 0,\n      width: \"0%\",\n    };\n\n    const startedStyle = {\n      opacity: 1,\n      width: \"99%\",\n      transition: \"width 10s cubic-bezier(0.1, 0.05, 0, 1)\",\n    };\n\n    const finishedStyle = {\n      opacity: 0,\n      width: \"100%\",\n      transition: \"width 0.1s ease-out, opacity 0.5s ease 0.2s\",\n    };\n\n    const glowStyle = {\n      opacity: 0.4,\n      boxShadow: \"3px 0 8px\",\n      height: \"100%\",\n    };\n\n    let timeout: number | undefined | null;\n    let current!: HTMLElement;\n\n    this.start = () => {\n      if (current && current.parentNode) {\n        current.parentNode.removeChild(current);\n      }\n      current = document.body.appendChild(document.createElement(\"div\"));\n      current.className = config.className + \" stopped\";\n      assign(current.style, initialStyle);\n\n      const glow = current.appendChild(document.createElement(\"div\"));\n      glow.className = \"glow\";\n      assign(glow.style, glowStyle);\n\n      if (timeout != null) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        timeout = null;\n        current.className = config.className + \" started\";\n        assign(current.style, startedStyle);\n      }, config.delay);\n\n      // Force a reflow, just to be sure that the initial style takes effect.\n      current.scrollTop = 0;\n    };\n\n    this.finish = () => {\n      if (timeout != null) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      if (current) {\n        current.className = config.className + \" finished\";\n        assign(current.style, finishedStyle);\n      }\n    };\n  }\n}\n"],"names":["options","assign","to","from","Object","keys","forEach","key","config","size","color","className","delay","timeout","current","initialStyle","position","top","left","margin","padding","border","borderRadius","backgroundColor","zIndex","height","opacity","width","startedStyle","transition","finishedStyle","glowStyle","boxShadow","this","start","parentNode","removeChild","document","body","appendChild","createElement","style","glow","clearTimeout","setTimeout","scrollTop","finish"],"mappings":"eAyBE,SAAYA,GAEV,IAAMC,EAAS,SAACC,EAASC,GACvBC,OAAOC,KAAKF,GAAMG,QAAQ,SAACC,GACzBL,EAAGK,GAAOJ,EAAKI,MAIbC,EAA4B,CAChCC,KAAM,EACNC,MAAO,OACPC,UAAW,kBACXC,MAAO,IAELZ,GACFC,EAAOO,EAAQR,GAGjB,IAmCIa,EACAC,EApCEC,EAAe,CACnBC,SAAU,QACVC,IAAK,EACLC,KAAM,EACNC,OAAQ,EACRC,QAAS,EACTC,OAAQ,OACRC,aAAc,EACdC,gBAAiB,eACjBC,OAAQ,IACRC,OACyB,iBAAhBjB,EAAOC,KAAoBD,EAAOC,KAAO,KAAOD,EAAOC,KAChEC,MAAOF,EAAOE,MACdgB,QAAS,EACTC,MAAO,MAGHC,EAAe,CACnBF,QAAS,EACTC,MAAO,MACPE,WAAY,2CAGRC,EAAgB,CACpBJ,QAAS,EACTC,MAAO,OACPE,WAAY,+CAGRE,EAAY,CAChBL,QAAS,GACTM,UAAW,YACXP,OAAQ,QAMVQ,KAAKC,MAAQ,WACPpB,GAAWA,EAAQqB,YACrBrB,EAAQqB,WAAWC,YAAYtB,IAEjCA,EAAUuB,SAASC,KAAKC,YAAYF,SAASG,cAAc,SACnD7B,UAAYH,EAAOG,UAAY,WACvCV,EAAOa,EAAQ2B,MAAO1B,GAEtB,IAAM2B,EAAO5B,EAAQyB,YAAYF,SAASG,cAAc,QACxDE,EAAK/B,UAAY,OACjBV,EAAOyC,EAAKD,MAAOV,GAEJ,MAAXlB,GACF8B,aAAa9B,GAEfA,EAAU+B,WAAW,WACnB/B,EAAU,KACVC,EAAQH,UAAYH,EAAOG,UAAY,WACvCV,EAAOa,EAAQ2B,MAAOb,IACrBpB,EAAOI,OAGVE,EAAQ+B,UAAY,GAGtBZ,KAAKa,OAAS,WACG,MAAXjC,IACF8B,aAAa9B,GACbA,EAAU,MAERC,IACFA,EAAQH,UAAYH,EAAOG,UAAY,YACvCV,EAAOa,EAAQ2B,MAAOX"}